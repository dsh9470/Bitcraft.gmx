<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_player</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_speed = 0;
image_index = 1;

facing = 1;

//1 = right, -1 = left

canCreate = true;

var jump = 2;


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var cursor_x = 0;
var cursor_y = 0;

//water movement

if(place_meeting(x,y,obj_water))
{

    if (place_free(x, y+1))
    gravity = 0.3;
    else
    gravity = 0;
    
    if(keyboard_check(ord("D"))) { x += 2; facing = 1; image_speed = 0.1; }
    if(keyboard_check(ord("A"))) { x -= 2; facing = -1; image_speed = 0.1; }
    
    if(keyboard_check_released(ord("D"))) { x += 5; facing = 1; image_index = 0; image_speed = 0; }
    if(keyboard_check_released(ord("A"))) { x -= 5; facing = -1; image_index = 0; image_speed = 0; }
    
    if(keyboard_check(vk_space) &amp;&amp; place_meeting(x,y+1,obj_block)){ 
    
        //if(jump &gt;= 0){
    
            vspeed -= 3;
           // jump-=1;
            
        //}
    
    }

}
else
{
    
    if (place_free(x, y+1))
    gravity = 1;
    else
    gravity = 0;
    
    if(keyboard_check(ord("D"))) { x += 5; facing = 1; image_speed = 0.18; }
    if(keyboard_check(ord("A"))) { x -= 5; facing = -1; image_speed = 0.18; }
    
    if(keyboard_check_released(ord("D"))) { x += 5; facing = 1; image_index = 0; image_speed = 0; }
    if(keyboard_check_released(ord("A"))) { x -= 5; facing = -1; image_index = 0; image_speed = 0; }
    
    if(keyboard_check_pressed(vk_space) &amp;&amp; place_meeting(x,y+1,obj_block)){ 
    
        //if(jump &gt;= 0){
    
            vspeed -= 16;
           // jump-=1;
            
        //}
    
    }

}

//*************************************
//block-building TEST

//on keypress, get mouse coordinates
if(keyboard_check(ord("E")))
{

    cursor_x = mouse_x;
    cursor_y = mouse_y;
    
    var block_x = (cursor_x div 32) * 32;
    var block_y = (cursor_y div 32) * 32;

    //check to see if block adjacent

    if(!place_meeting(block_x+16,block_y+16,obj_block) 
//            &amp;&amp; !(place_meeting(cursor_x+17,cursor_y,obj_block) 
//           or place_meeting(cursor_x-17,cursor_y,obj_block)
//            or place_meeting(cursor_x,cursor_y+17,obj_block)
//            or place_meeting(cursor_x,cursor_y-17,obj_block))
                                                                )
    {

        //snap to grid with div 32 * 32
        

        
        //create obj

        instance_create(block_x,block_y,obj_dirt);
        
    }


}

//*************************************

view_xview[0] = x - (view_wview[0]/2);

//stop camera at bedrock
if(view_yview[0] &gt;= 720 &amp;&amp; y &gt; view_yview[0] + (view_hview[0] / 2)) view_yview[0] = 720;
else view_yview[0] = y - (view_hview[0]/2);

//create next chunk when player reaches midway pt of current

if(facing == 1)
{
    if(x &gt;= (global.length - 800) &amp;&amp; canCreate)
    {
        canCreate = false;
        if(global.currentchunk == 0)
            global.length = generate(global.length);
        else if(global.currentchunk == 1)
            global.length = generate_des(global.length);
        else if(global.currentchunk == 2)
            global.length = generate_ice(global.length);
        canCreate = true;
        
        //counter for extending current biome
        //if finished, reset for next biome
        if(global.chunk_length &gt; global.chunk_count)
            global.chunk_count++;
        else{
            global.chunk_count = 0;
            global.chunk_length = floor(random(2) + 1);
            global.currentchunk = choose(0,1,2);
        }
    }
}
else if (facing == -1)
{
    if(x &lt;= (global.length2 - 800) &amp;&amp; canCreate)
    {
        canCreate = false;
        if(global.currentchunk == 0)
            global.length2 = generate(global.length2 - 3200);
        else if(global.currentchunk == 1)
            global.length2 = generate_des(global.length2 - 3200);
        else if(global.currentchunk == 2)
            global.length2 = generate_ice(global.length2 - 3200);
        canCreate = true;
        
        //counter for extending current biome
        //if finished, reset for next biome
        if(global.chunk_length &gt; global.chunk_count)
            global.chunk_count++;
        else{
            global.chunk_count = 0;
            global.chunk_length = floor(random(2) + 1);
            global.currentchunk = choose(0,1,2);
        }
    }
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_drop">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>other</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_block">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var dist,dir,xdir,ydir;

dist=point_distance(x,y,xprevious,yprevious);

dir=degtorad(point_direction(xprevious,yprevious,x,y));

xdir=cos(dir);

ydir=-sin(dir);

x=xprevious;

y=yprevious;

repeat dist{

if place_meeting(x+xdir,y,other.object_index)

{
    hspeed=0; 
    jump = 2;

}
    
else

x+=xdir;

if place_meeting(x,y+ydir,other.object_index)

vspeed=0; else

y+=ydir;

}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_self();
if(facing = 1) image_xscale = 1;
else image_xscale = -1;

//debug
draw_text(view_xview[0] + 10, view_yview[0] + 10, string("DEBUG: V to toggle fog, R to reset"));
draw_text(view_xview[0] + 10, view_yview[0] + 20, string("DEBUG: mouse x: " + string(mouse_x) + " y: " + string(mouse_y)));
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>0,0</point>
    <point>32,32</point>
  </PhysicsShapePoints>
</object>
